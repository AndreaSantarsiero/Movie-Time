La funzionalità di video chat consente ai due utenti connessi tramite WebRTC di vedersi e parlarsi mentre guardano insieme un contenuto su Netflix. Il sistema si basa su due flussi video: uno locale, proveniente dalla webcam e dal microfono dell’utente, e uno remoto, proveniente dal peer. Quando l’utente apre una pagina di Netflix, l’estensione inietta nello stesso documento un floating overlay che contiene i due riquadri video e i controlli principali. Questo overlay è indipendente dal player di Netflix e rimane visibile anche durante il fullscreen, grazie a un meccanismo di rilocazione che lo sposta automaticamente dentro l’elemento fullscreen quando necessario.

La video chat inizia quando la pagina richiede l’accesso alla webcam attraverso le API getUserMedia. Una volta che l’utente concede l’autorizzazione, il flusso locale viene collegato al video locale dell’overlay e contemporaneamente inviato al modulo WebRTC, che si incarica di aggiungerlo alla RTCPeerConnection. Quando il peer remoto invia il proprio flusso, l’overlay aggiorna automaticamente il video remoto, lo rende udibile e cerca di riprodurlo subito; se l’autoplay viene bloccato dal browser, il sistema mostra un pulsante temporaneo che l’utente può cliccare per avviare manualmente la riproduzione del video remoto.

L’overlay contiene un insieme di pulsanti che controllano la video chat. Il pulsante della videocamera permette di attivare o disattivare il video locale: quando è spento, la traccia video della webcam viene disabilitata, il riquadro locale appare nero e l’altro utente smette di ricevere il segnale video. Il pulsante del microfono controlla l’audio locale: quando è disattivato, le tracce audio vengono silenziate e il peer non riceve più il segnale vocale. Entrambi i pulsanti aggiornano il loro colore per riflettere visivamente lo stato corrente, diventando rossi quando la funzione associata è spenta.

Il pulsante di chiusura rimuove l’intero overlay dalla pagina. La rimozione non chiude la connessione WebRTC, che rimane attiva finché l’estensione non viene ricaricata o la pagina non viene ricaricata, ma disattiva completamente l’interfaccia della video chat da quel lato. Per tornare a visualizzarla è necessario ricaricare la tab o reiniettare l’overlay tramite il normale flusso dell’estensione.

La finestra della video chat può essere spostata liberamente sullo schermo trascinandola con il mouse su qualsiasi punto non interattivo dell’overlay. Le sue dimensioni possono essere modificate grazie alla proprietà CSS resize, che consente all’utente di adattarla alla propria preferenza. L’overlay gestisce automaticamente la visibilità dei controlli: normalmente resta pulito e senza elementi sovrapposti, ma quando il mouse si avvicina o l’utente tocca l’area del video, i pulsanti compaiono per qualche secondo e poi scompaiono di nuovo per non disturbare la visione.

Il pulsante di sincronizzazione, presente anch’esso nell’overlay, non fa parte della video chat in senso stretto ma condivide la stessa UI. Serve per attivare o disattivare la funzione di sync e comunica con il modulo di sincronizzazione per permettere ai due utenti di vedere lo stesso contenuto in maniera coordinata. L’indicatore accanto al pulsante mostra uno stato sintetico, indicando se il contenuto è compatibile, se i ruoli sono stati assegnati e qual è il drift istantaneo tra i due player.

La gestione dello stream remoto viene svolta dal modulo WebRTC, che crea e mantiene attiva la RTCPeerConnection, gestisce gli scambi ICE e si occupa di inoltrare lo stream remoto all’overlay. Quando un nuovo flusso remoto viene ricevuto, l’overlay aggiorna automaticamente il video remoto. Se il remoto cambia dispositivo audio o video, il nuovo stream viene propagato senza necessità di intervento manuale. In caso di disconnessioni momentanee o instabilità della connessione, la video chat rimane attiva e si ripristina automaticamente quando il flusso remoto torna disponibile, finché la connessione non viene completamente chiusa.

Nel complesso, la video chat offre un’interfaccia compatta e discreta che permette ai due utenti di comunicare in tempo reale mentre condividono la visione, con controlli essenziali ma immediati e con un comportamento che si integra naturalmente nel contesto di Netflix senza interferire con il player principale.
